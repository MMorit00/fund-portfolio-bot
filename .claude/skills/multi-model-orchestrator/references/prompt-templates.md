# Prompt 模板库索引

本目录包含用于不同模型的 prompt 模板库。

---

## 模板文件

### [gemini-prompts.md](./gemini-prompts.md)

专门用于 Gemini 模型的 prompt 模板，充分利用其 1M 上下文能力。

**包含模板**：
- **基础分析**：架构分析、代码解释、依赖分析
- **探索类**：功能流程探索、模块架构探索、问题定位探索、跨模块交互探索

**核心特点**：
- 要求完整分析，不要求精简
- 穷尽式探索，尽可能多的细节
- 适合大范围代码库探索（5-50 个文件）

---

### [codex-prompts.md](./codex-prompts.md)

专门用于 Codex 模型（GPT-5.2 high reasoning）的 prompt 模板，充分利用其深度推理能力。

**包含模板**：
- **基础验证**：逻辑验证、算法审查、方案评估
- **高级验证**：代码质量关卡、并发/竞态分析、性能瓶颈推理、重构前后对比

**核心特点**：
- 要求展示完整推理过程
- 推理链条比结论更重要
- 适合关键逻辑和高风险代码验证

---

## 快速导航

| 任务类型 | 使用文件 | 推荐模板 |
|---------|---------|---------|
| 理解代码架构 | gemini-prompts.md | 架构分析 |
| 梳理功能流程 | gemini-prompts.md | 功能流程探索 |
| 探索模块设计 | gemini-prompts.md | 模块架构探索 |
| 定位 Bug 根因 | gemini-prompts.md | 问题定位探索 |
| 验证逻辑正确性 | codex-prompts.md | 逻辑验证 |
| 审查算法复杂度 | codex-prompts.md | 算法审查 |
| 评估技术方案 | codex-prompts.md | 方案评估 |
| 合并前质量关卡 | codex-prompts.md | 代码质量关卡 |
| 并发安全分析 | codex-prompts.md | 并发/竞态分析 |
| 性能问题分析 | codex-prompts.md | 性能瓶颈推理 |
| 重构安全验证 | codex-prompts.md | 重构前后对比 |

---

## 使用原则

### Gemini 使用原则
- 不设字数限制，保留所有有价值的信息
- 探索类任务要求穷尽式分析，不能浅尝辄止
- 包含文件路径、行号、代码示例
- 只移除 metadata 和客套话，不压缩内容

### Codex 使用原则
- 推理过程比结论更重要，完整展示思考链
- 不设字数限制，保留所有推理步骤
- 包含代码示例、边界情况、测试用例
- 只移除 metadata 和客套话，不压缩推理内容

---

## 成本策略

```
┌─────────────────────────────────────────────────────────┐
│  Gemini/Codex 输出  →  便宜，让它尽可能多地输出          │
│  haiku 处理         →  便宜，负责去除噪音                │
│  Opus 接收          →  贵，只接收有价值的内容            │
└─────────────────────────────────────────────────────────┘
```

**过滤原则**：
- ❌ 错误：过度精简，压缩字数，丢失细节
- ✅ 正确：去除噪音，保留完整的分析和推理
